USE ClickUniversityGoDB

CREATE TABLE Universities (
	ID int NOT NULL PRIMARY KEY IDENTITY(1,1),
	UniversityName NVARCHAR (500),
	Website NVARCHAR (100),
	State NVARCHAR (50),
	CostOnCampusInState INT,
	CostOnCampusOutOfState INT,
	CostOffCampusInState INT,
	CostOffCampusOutOfState INT,
	PercentAdmitted TINYINT,
	UndergradEnrollment INT,
	NumAssociate INT,
	NumBachelor INT,
	GraduationRate TINYINT,
	ACTComposite INT,
	SATReadWrite INT,
	SATMath INT,
	ProgramEducation INT,
	ProgramEngineering INT,
	ProgramScience INT,
	ProgramMath INT,
	ProgramPhysicalScience INT,
	ProgramBusiness INT,
);

CREATE TABLE UserProfiles (
	ID INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	Email NVARCHAR (256),
	HomeState NVARCHAR (50),
	ACTScore INT,
	SATScore INT,
	DesiredState NVARCHAR (50)
);

CREATE TABLE Favorites (
	ID INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	UserID NVARCHAR(450),
	UniversityID INT
);

---------------------------------------------------------------
------------------- Question & Answers ------------------------
---------------------------------------------------------------
CREATE TABLE Answers(
	Id INT IDENTITY(1,1) NOT NULL,
	UserName NVARCHAR (500) NOT NULL,
	Detail NVARCHAR (4000) NOT NULL,
	QuestionId INT NOT NULL,
	Posted DATETIME NOT NULL,
	Upvotes INT NOT NULL,
 CONSTRAINT PK_Answers PRIMARY KEY CLUSTERED 
(
	Id ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE Questions(
	Id INT IDENTITY(1000,1) NOT NULL,
	UserName NVARCHAR(30) NOT NULL,
	Title NVARCHAR(200) NOT NULL,
	Detail NVARCHAR(4000) NOT NULL,
	Posted DATETIME NOT NULL,
	Category NVARCHAR(30) NOT NULL,
	Tags NVARCHAR(200) NULL,
	Status INT NOT NULL,
 CONSTRAINT PK_Questions PRIMARY KEY CLUSTERED 
(
	Id ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE Answers  WITH CHECK ADD  CONSTRAINT FK_Questions_Answers FOREIGN KEY(QuestionId)
REFERENCES Questions (Id)
GO
ALTER TABLE Answers CHECK CONSTRAINT FK_Questions_Answers
GO
USE [master]
GO
ALTER DATABASE ClickUniversityGoDB SET READ_WRITE 
GO

DELETE FROM Universities 
WHERE (Website IS NULL
OR NumBachelor IS NULL
OR PercentAdmitted IS NULL
OR GraduationRate IS NULL
OR UndergradEnrollment IS NULL
OR UndergradEnrollment <= 50
OR (ProgramEducation IS NULL 
	AND ProgramEngineering IS NULL 
	AND ProgramScience IS NULL
	AND ProgramMath IS NULL
	AND ProgramPhysicalScience IS NULL
	AND ProgramBusiness IS NULL))